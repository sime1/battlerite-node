<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: player.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: player.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Wrapper = require('./common/wrapper');
const httpsExecutor = require('./common/https-executor');
let OPTIONS = require('./common/options.js');

/**
* Class Player, containing data about a single player and static methods used to
* retrieve Player data from the API.
* @property {String} type - alway "player"
* @property {String} id - player unique ID
* @property {String} name - player name
* @property {String} patchVersion - empty string
* @property {String} shardId - id of the shard where the player data resides. As all the data is stored in the same datacenter right now, this is always empty
* @property {Objct} stats -
* @memberof Battlerite
*/
class Player extends Wrapper {

  /**
  * Player Filter options
  * @typedef {Object} PlayerFilterOptions
  * @property {String|String[]} playerIds - Filters by player ID. Can be a string of comma-separated IDs or an array of IDs.
  * @property {String|String[]} playerNames - Filters by player name. Can be a string of comma-separated IDs or an array of names.
  * @property {String|String[]} steamIds - Filters by player steam ID. Can be a string of comma-separated IDs or an array of steam IDs.
  */

  /**
   * Options available while retrieving a list of players.
   * @typedef {Object} PlayerListOptions
   * @property {PlayerFilterOptions} filter - Filter options.
   */

  /**
   * Constructor for the Player class.
   * @param {Object} playerData - data about the player
   * @param {boolean} reorganize - tells the constructor whether it has to reorganize the player data or not.
   * if false, playerData is just copied inside the new player. If true, data is organized so that
   * attributes are moved directly inside the Player Object.
   * this allows to copy data between two different Player objects.
   */
  constructor(playerData, reorganize = true){
    super(playerData, reorganize);
  }

  /**
   * Static method that fetches a list of players from the API. You must call {@link Battlerite.config} and set the API key before calling this.
   * @param {PlayerListOptions} params - Options used to select which players are retrieved.
   * @returns {Promise} a promise which in case of success is fulfilled with an array of {@link Battlerite.Player} objects
  */
  static getList(params = {}){
    let options = {...OPTIONS}, urlParams = [];
    options.path += '/players';
    let filter = {};
    ({
      filter: {
        playerNames: filter['playerNames'],
        playerIds: filter['playerIds'],
        steamIds: filter['steamIds']
      } = {}
    } = params);
    for(let prop in filter){
      if(filter[prop]){
        let curFilter;
        if(Array.isArray(filter[prop]))
          curFilter = filter[prop].join(',');
        else
          curFilter = filter[prop];
        urlParams.push('filter[' + prop + ']=' + curFilter);
      }
    }
    if(urlParams.length){
      options.path += `?${urlParams.join('&amp;')}`;
    }
    return new Promise(httpsExecutor(options)).then((res) => res.data.map((player) => new Player({data: player, included: res.included})));
  }
  /**
   * static method that fetches the data about a single player. You must call {@link Battlerite.config} and set the API key before calling this.
   * @param {String} id - id of the player to retrieve.
   * @returns {Promise} a promise which in case of success is fulfilled with a {@link Battlerite.Player} Object.
  */
  static get(id){
    if(!id)
      return Promise.reject(new Error('Must specify id'));
    let options = {...OPTIONS};
    options.path += `/players/${id}`;
    return new Promise(httpsExecutor(options)).then((data) => new Player(data, true));
  }
}

module.exports = Player;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Battlerite.Match.html">Match</a></li><li><a href="Battlerite.Player.html">Player</a></li><li><a href="Battlerite.Team.html">Team</a></li></ul><h3>Namespaces</h3><ul><li><a href="Battlerite.html">Battlerite</a></li><li><a href="Battlerite.champions.html">champions</a></li><li><a href="Battlerite.maps.html">maps</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Jan 04 2018 10:41:59 GMT+0100 (W. Europe Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
